# 事件循环

## Q：是什么？

* A：js实现异步的一种方法，也是js的执行机制。JavaScript 引擎在执行任务时，会进入一个循环

## Q：有什么用？

* A：不断检测任务队列中是否有任务
  * 若有==>从任务队列中取出任务，并按任务队列顺序执行相应的代码。

## Q：解决了什么问题？

* A：处理 JavaScript 中的异步操作和事件。它负责协调执行任务和处理事件，使得 JavaScript 可以处理多个任务并保持响应性。

## Q：工作原理？

* A：
  1. 检查事件队列是否为空，如果为空，则继续检查；如不为空，则执行 2；
  2. 取出事件队列的首部，压入执行栈；
  3. 执行任务；
  4. 检查执行栈，如果执行栈为空，则跳回第 1 步；如不为空，则继续检查；

## Q：遇到不同任务处理方式如何？

* A：
  * 遇到同步任务就放在执行栈中执行，
  * 而碰到异步任务就放到任务队列之中，等到执行栈执行完毕之后再去执行任务队列之中的事件。

# 任务队列（又称消息队列、事件队列）

##Q：是什么？

* A：存储着待执行任务的队列，其中的任务严格按照时间先后顺序执行，排在队头的任务将会率先执行，而排在队尾的任务会最后执行。

##Q：有什么用？

*  A：用于存储待执行的任务（异步任务）。

## Q：任务类型有哪些？

* A：
  * 宏任务（macro-task）：如包括 script 标签中的代码、定时器回调等。
  * 微任务（micro-task）：如包括 Promise 的回调、MutationObserver 回调等。

## Q：先执行哪种任务？

* A：

## Q：任务队列中的任务何时执行？

* A：等运行栈（Call Stack）中的同步任务执行结束后执行。

## Q：处理流程是啥？

* A：事件队列每次仅执行一个任务，在该任务执行完毕之后，再执行下一个任务。
  * 运行时会从最先进入队列的消息开始处理队列中的消息。
  * 被处理的消息会被移出队列，并作为输入参数来调用与之关联的函数。

## Q：JavaScript任务分成哪两种？

* A：
  * 同步任务（synchronous）
    * 在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务
  * 异步任务（asynchronous）
    * 不进入主线程、而进入"任务队列"（task queue）的任务，只有主线程中的同步任务执行完毕，异步任务才会进入执行队列执行。

# 定时器

## Q：定时器（setTimeout）何时进入任务队列

* A：定时器设定时间结束后，才进入任务队列

# 事件

## Q：事件分类？

* A：事件分为同步任务和异步任务

## Q：事件传播的三个阶段是什么？

* A：Capturing（捕获） > Target（达到目标） > Bubbling（冒泡）

  ![](https://camo.githubusercontent.com/b302f8396d6e312bb45dce44b610d3bb03210420d43b32480893c9786a4427e5/68747470733a2f2f692e696d6775722e636f6d2f4e31386f5267642e706e67)

## Q：多层onClick事件，event.target是什么？

* A：target是，导致事件的最深嵌套的元素。

## Q：事件在哪个阶段处理？

* A：默认情况下，事件处理程序在冒泡阶段执行。（所以从嵌套最深向往逐层处理）
